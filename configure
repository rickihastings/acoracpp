#!/bin/sh
#===================================================#
#              ~ Acora IRC Services ~               #
#               Configuration Script                #
#                                                   #
#       Acora (C) 2011 Acora Development Team       #
# Please see the file CREDITS for more information. #
#                                                   #
#   This program is free but copyrighted software   #
#      Please see the file COPYING for details.     #
#                                                   #
#===================================================#
# $Id: configure 685 2009-01-28 22:47:17Z ankit $
#===================================================#

INSTPATH="$1"
ORIGPATH="$(pwd)"

if [ "$INSTPATH" = "" ]; then
	INSTPATH="$ORIGPATH";
fi

cd $INSTPATH

echo "**************************************"
echo "*   CONFIGURING ACORA IRC SERVICES   *"
echo "**************************************"
echo " "
echo "Installation directory: $INSTPATH"
echo " "
echo "Writing config.h ..."

(
echo -n "//===================================================//
//                                                   //
//              ~ Acora IRC Services ~               //
//                                                   //
//       Acora (C) 2011 Acora Development Team       //
// Please see the file CREDITS for more information. //
//                                                   //
//   This program is free but copyrighted software   //
//      Please see the file COPYING for details.     //
//                                                   //
// This file is autogenerated by configure and will  //
//      be replaced next time configure is ruN.      //
//                                                   //
//===================================================//

#ifndef CONFIG_H
#define CONFIG_H

namespace config
{
	// acora version
	const char VERSION[] = \"0.1-git\";

	// acora root directory
	const char ROOTDIR[] = \"$INSTPATH/\";

	// directory where socketengines are installed
	const char SOCKDIR[] = \"$INSTPATH/bin/socketengines/\";
	// directory where ircdprotocols are installed
	const char IRCDDIR[] = \"$INSTPATH/bin/ircdprotocols/\";
	// directory where diskmanagers are installed
	const char DISKDIR[] = \"$INSTPATH/bin/diskmanagers/\";
	// directory where modules are installed
	const char MODDIR[] = \"$INSTPATH/bin/modules/\";

	// config file directory
	const char CONFDIR[] = \"$INSTPATH/data/conf/\";
} // namespace config

#endif // CONFIG_H
"
) > $INSTPATH/include/config.h

echo "Writing Makefile.inc ..."

if [ "$(uname -a | grep 'BSD' | sed 's/.*/1/')" != "1" ]; then
	LDL="-ldl";
fi

HIDEMAKE="--no-print-directory -s";

(
echo -n "#===================================================#
#                                                   #
#              ~ Acora IRC Services ~               #
#                                                   #
#       Acora (C) 2011 Acora Development Team       #
# Please see the file CREDITS for more information. #
#                                                   #
#   This program is free but copyrighted software   #
#      Please see the file COPYING for details.     #
#                                                   #
# This file is autogenerated by configure and will  #
#      be replaced next time configure is run.      #
#                                                   #
#===================================================#

LDL= $LDL
HIDEMAKE= $HIDEMAKE
"
) > $INSTPATH/Makefile.inc

echo " "
echo "****************************************************"
echo "*    ACORA IRC SERVICES SUCCESSFULLY CONFIGURED    *"
echo "*        Type '(g)make' to start compiling         *"
echo "*  Type '(g)make modules' to only compile modules  *"
echo "****************************************************"

exit 0

